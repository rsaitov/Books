## Глава 32 - Самодокументирующийся код

Как и форматирование, хорошая документация - свидетельство профессиональной гордости, выражаемой программистом в программе.

Документация складывается из информации, содержащейся в листингаз исходного кода, и внешней информации, которая обычно имеет форму отдельных документов или папок разработки блоков.

Главный вклад в документацию уровня кода вносится не комментариями, а хорошим стилем программирования.
### Виды комментариев
- повторение кода. Заставляет больше читать, не предоставляя дополнительно информации;
- объяснение кода. Для сложгых, хитрых или нестабильных моментов;
- маркер в коде. Указывает на то, что работа еще не выполнена;
- резюме кода. Выражают суть нескольких строк кода;
- описание цели кода. Относятся скорее к уровню проблемы, чем к уровню ее решения;
- информация, которую невозможно выразить в форме кода. Уведомление об авторских правах и конфиденциальности данных, номера версий и другие детали, замечания о структуре кода, ссылки на релевантные документы требований или архитектуры, ссыли на Интернет-ресурсы, соображения по оптимизации и т.д.

Эффективное комментирование:
- используйте стили, не препятствующие изменению комментариев;
- используйте для сокращения времени, уходящего на комментирование, процесс программирования с псевдокодом. Формулирование кода в виде комментариев перед его написанием обеспечивает ряд преимуществ. Когда вы завершите работу над кодом, комментарии уже будут готовы;
- интегрируйте комментирование в свой стиль разработки. Если проект трудно закодировать, упростите его до начала работы над комментариями или кодом. Если для организации своего мышления вы будете использовать псевдокод, кодирование станет легким, а комментирование автоматическим;
- производительность не является разумной причиной отказа от комментирования.

Понятность кода достигает пика при одном комментарии примерно на 10 операторов. Но вместо концентрации на плотности комментариев сосредоточьтесь на их эффективности.

### Методики комментирования
**Комментирование отдельных строк** 

Возникает редко. есть 2 причины: строка довольно сложна и требует объяснения и строка когда-то содержала ошибку и вы хотите отметить это.

- избегайте комментариев, высосанных из пальца;
- не используйте комментарии в концах строк, относящиеся к одиночным строкам. Большинство таких комментариевв повторяют строку кода, что скорее вредит, чем помогает;
- не используйте комментарии в концах строк, относящиеся к нескольким строкам кода.

Разумные причины использования комментариев в концах строк:
- используйте комментарии в концах строк для пояснения объявлений данных;
- не используйте комментарии в концах строк для вставки пометок во время сопровождения ПО. Комментарии должны объяснять, почему код работает сейчас, а не почему он когда-то не работал;
- используйте комментарии в концах строк для обозначения концов блоков.

**Комментирование абзацев кода**

Большинство комментариев в хорошо документированной программе состоят из 1-2 предложений и описывают абзацы кода.

- пишите комментарии на уровне **цели кода**;
- во время документирования сосредоточьтесь на самом коде. Если код достаточно хорошо, его цель можно понять при чтении и без комментариев;
- придумывая комментарий абзаца, стремитесь ответить на вопрос "почему?", а не "как?";
- используйте комментарии для подготовки читателя кода к последующей информации;
- не размножайте комментарии без необходимости;
- документируйте сюрпризы;
- избегайте сокращений;
- проведите различие между общими и детальными комментариями;
- комментируйте все, что имеет отношение к ошибкам или недокументированным возможностям яхыка или среды;
- обосновывайте нарушения хорошего стиля программирования;
- не комментируйте хитрый код - перепишите его.

**Комментирование объявлений данных**

Описывает аспекты переменной, которые невозможно выразить в ее имени.

- указывайте в комментариях единицы измерения численных величин. Часто следует указывать единицы измерения в именах переменных;
- указывайте в комментариях диапазоны допустимых значений численных величин;
- комментируйте смысл закодированных значений. Если ЯП поддерживает перечисления, используйте их для выражения смысла закодированных значений;
- комментируйте ограничения входных данных;
- документируйте флаги до уровня отдельных битов;
- включайте в комментарии, относящиеся к переменной, имя переменной;
- документируйте глобальные данные.