## Глава 26 - Методики оптимизации кода

Рефакторинг направлен на улучшение внутренней структуры программы. Оптимизация ухудшает внутреннюю структуру программы ради повышения ее производительности.

Никакой из видов оптимизации не следуюет применять слепо: результаты будут во многом зависеть от реализации конкретным компиляторов.
### Логика
- прекращение проверки сразу же после получения ответа;
- упорядочивание тестов по частоте;
- сравнение быстродействия похожих структур логики;
- замена сложных выражений на обращение к таблице;
- отложенные вычисления. Производить вычисление только по мере необходимости. После вычисления - сохранить данные (кеширование).
### Циклы
- размыкание цикла. Замыканием называется принятие решения внутри цикла при каждой его итерации. Если во время выполнения цикла решение не изменяется, вы можете разомкнуть (unswitch) цикл, приняв решение вне цикла;
- объединение циклов. Прежде чем объединять циклы, убедитесь, что это не нарушит работу остальных частей кода;
- развертывание циклов (unrolling);
- минимизация объема работы, выполняемой внутри циклов4
- сигнальные значения - значения, которые располагаются сразу после окончания диапазона поиска и непременно завершает поиск.
- вложение более ресурсоемкого цикла в менее ресурсоемкий;
- снижение стоимости операций - замена дорогой операции на более дешевую (например умножения на сложение)
### Изменения типов данных
- использование целых чисел вместо чисел с плавающей запятой;
- использование массивов с минимальным числом измерений;
- минимизация числа обращений к массивам;
- использование дополнительных индексов (например, индекс длины строки: слежение за длиной структуры часто - более эффективный подход, чем вычисление длины каждый раз, когда она требуется);
- кэширование - способ хранения нескольких значений, при котором значения, используемые чаще всего, получить легче, чем значения, используемые реже.
### Выражения
Многие задачи программирования требуют применени математических и логических выражений. Сложные выражения обычно дороги и далее рассмотрены способы их удешевления.
- алгебраические тождества. 
```
not a and not b
not (a or b) // выбрав этот вариант, вы сэкономите одну операцию __not__
```
- снижение стоимости операций (замена умножения сложением, замена возведения в степень умножением, замена тригонометрических функций их эквивалентами итп);
- инициализация во время компиляции;
- недостатки системных методов;
- использование констант корректного типа;
- предварительное вычисление результатов. При низкоуровневом проектировании часто приходится решать, вычислять ли результаты по ходу дела или лучше вычислить их один раз, сохранить и извлекать по мере надобности. Если результаты используются много раз, второй вариант часто предпочтительнее;
- устранение часто используемых подвыражений.